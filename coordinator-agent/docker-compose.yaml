services:
  coordinator-agent:
    image: ${DOCKER_TAG}
    container_name: coordinator-agent
    platform: linux/amd64
    restart: always
    ports:
      - "3000:3000"
    volumes:
      - /var/run/dstack.sock:/var/run/dstack.sock
    environment:
      PORT: ${PORT}
      POLL_INTERVAL: ${POLL_INTERVAL}
      NEAR_NETWORK: ${NEAR_NETWORK}
      # Shade Agent v2 config
      AGENT_CONTRACT_ID: ${AGENT_CONTRACT_ID}
      SPONSOR_ACCOUNT_ID: ${SPONSOR_ACCOUNT_ID}
      SPONSOR_PRIVATE_KEY: ${SPONSOR_PRIVATE_KEY}
      # Ensue configuration
      ENSUE_API_KEY: ${ENSUE_API_KEY}
      ENSUE_TOKEN: ${ENSUE_TOKEN}
      # Contract for view calls (local-contract.ts)
      NEXT_PUBLIC_contractId: ${NEXT_PUBLIC_contractId}
